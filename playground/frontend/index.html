<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Felinto Connect Bot - Debug Playground</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  </head>
  <body>
    <div id="app">
      <header class="header">
        <div class="header-left">
          <h1><i data-lucide="bot"></i> Felinto Connect Bot</h1>
        </div>
        
        <nav class="header-nav">
          <ul class="nav-menu">
            <li class="nav-item">
              <a href="#playground" class="nav-link active" data-page="playground">
                <i data-lucide="play"></i>
                Playground
              </a>
            </li>
            <li class="nav-item">
              <a href="#recording" class="nav-link" data-page="recording">
                <i data-lucide="video"></i>
                Gravação da Sessão
              </a>
            </li>
          </ul>
        </nav>
        
        <div class="header-right">
          <button id="docsBtn" class="btn btn-secondary btn-small" title="Abrir Documentação">
            <i data-lucide="book-open"></i>
            Documentação
          </button>
        </div>
      </header>

      <main class="container">
        <!-- Playground Page -->
        <div id="playgroundPage" class="page-content active">
        <section class="config-section">
          <div class="section-header">
            <h2><i data-lucide="settings" class="section-icon"></i> Configurações da sessão</h2>
            <div class="header-actions">
              <button id="toggleConfigSection" class="section-toggle-btn" title="Expandir/Recolher seção">
                <i data-lucide="chevron-up" class="toggle-icon"></i>
                <span class="toggle-text">Recolher</span>
              </button>
              <div class="dropdown">
                <button id="importDropdownBtn" class="btn btn-secondary btn-small dropdown-toggle" title="Importar configurações">
                  <i data-lucide="upload"></i>
                  Importar
                  <i data-lucide="chevron-down" class="dropdown-arrow"></i>
                </button>
                <div class="dropdown-menu" id="importDropdownMenu">
                  <button class="dropdown-item" id="importConfig" title="Importar configuração completa do clipboard">
                    <i data-lucide="settings"></i>
                    Configuração Completa
                  </button>
                  <div class="dropdown-item dropdown-submenu" id="cookiesSubmenu">
                    <i data-lucide="cookie"></i>
                    Cookies
                    <i data-lucide="chevron-right" class="submenu-arrow"></i>
                    <div class="dropdown-submenu-content">
                      <button class="dropdown-item" id="importPuppeteerCookies" title="Importar apenas cookies no formato Puppeteer">
                        <i data-lucide="cookie"></i>
                        Puppeteer
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <button id="exportConfig" class="btn btn-secondary btn-small" title="Exportar configurações para clipboard">
                <i data-lucide="download"></i>
                Exportar
              </button>
            </div>
          </div>
          
          <div id="configSectionContent" class="section-content">
          
          <!-- Templates Rápidos movido para o topo -->
          <div class="config-group">
            <h3><i data-lucide="layout-template" class="subsection-icon"></i> Templates Rápidos</h3>
            <div class="template-buttons">
              <button class="template-btn" data-template="basic">
                <i data-lucide="rocket" class="template-icon"></i>
                Básico
              </button>
              <button class="template-btn" data-template="ecommerce">
                <i data-lucide="shopping-cart" class="template-icon"></i>
                E-commerce
              </button>
              <button class="template-btn" data-template="social">
                <i data-lucide="smartphone" class="template-icon"></i>
                Social Media
              </button>
              <button class="template-btn" data-template="scraping">
                <i data-lucide="search" class="template-icon"></i>
                Scraping
              </button>
            </div>
          </div>

          <div class="config-group">
            <div class="field">
              <label for="browserWSEndpoint">
                <i data-lucide="link" class="field-icon"></i>
                Browser WebSocket URL
              </label>
              <div class="input-with-inline-button">
                <input type="url" id="browserWSEndpoint" value="ws://localhost:9222">
                <button type="button" id="validateWSEndpoint" class="inline-badge-button" title="Validar conexão com o endpoint WebSocket">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 12l2 2 4-4"></path>
                    <circle cx="12" cy="12" r="10"></circle>
                  </svg>
                  <span>Validar conexão</span>
                </button>
              </div>
              <small>URL do navegador WebSocket</small>
            </div>

            <div class="field">
              <label for="initialUrl">
                <i data-lucide="globe" class="field-icon"></i>
                URL Inicial
              </label>
              <input type="url" id="initialUrl" value="https://twitter.com/login">
              <small>Página inicial a ser carregada</small>
            </div>

            <div class="field">
              <div class="field-header-with-toggle">
                <label>
                  <i data-lucide="database" class="field-icon"></i>
                  Session Data (JSON)
                </label>
                <button type="button" id="sessionDataToggle" class="editor-toggle-btn-discrete" data-editor-toggle="sessionData" title="Expandir editor (Ctrl+Shift+E)">
                  <span class="toggle-text">expandir</span>
                  <span class="toggle-icon">⤢</span>
                </button>
              </div>
              <div id="sessionData" data-editor-id="sessionData"></div>
              <small>Dados completos da sessão (cookies, localStorage, sessionStorage)</small>
              
              <!-- Session Data Templates -->
              <div class="session-templates" style="margin-top: 10px;">
                <label style="font-size: 12px; color: #666; margin-bottom: 5px; display: block;">
                  <i data-lucide="zap" style="width: 12px; height: 12px;"></i>
                  Templates Rápidos:
                </label>
                <div class="session-template-buttons" style="display: flex; gap: 5px; flex-wrap: wrap;">
                  <button type="button" class="session-template-btn" data-session-template="clear-all" style="font-size: 11px; padding: 6px 10px; background: #ef4444; color: white; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center;" onmouseover="this.style.background='#dc2626'" onmouseout="this.style.background='#ef4444'">
                    <i data-lucide="trash-2" style="width: 12px; height: 12px; margin-right: 4px;"></i>
                    Limpar Tudo
                  </button>
                  <button type="button" class="session-template-btn" data-session-template="clear-cookies" style="font-size: 11px; padding: 6px 10px; background: #f97316; color: white; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center;" onmouseover="this.style.background='#ea580c'" onmouseout="this.style.background='#f97316'">
                    <i data-lucide="cookie" style="width: 12px; height: 12px; margin-right: 4px;"></i>
                    Só Cookies
                  </button>
                  <button type="button" class="session-template-btn" data-session-template="clear-localStorage" style="font-size: 11px; padding: 6px 10px; background: #8b5cf6; color: white; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center;" onmouseover="this.style.background='#7c3aed'" onmouseout="this.style.background='#8b5cf6'">
                    <i data-lucide="hard-drive" style="width: 12px; height: 12px; margin-right: 4px;"></i>
                    Só localStorage
                  </button>
                  <button type="button" class="session-template-btn" data-session-template="clear-sessionStorage" style="font-size: 11px; padding: 6px 10px; background: #6b7280; color: white; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center;" onmouseover="this.style.background='#4b5563'" onmouseout="this.style.background='#6b7280'">
                    <i data-lucide="database" style="width: 12px; height: 12px; margin-right: 4px;"></i>
                    Só sessionStorage
                  </button>

                </div>
              </div>
            </div>
          </div>



          <div class="config-group">
            <div class="advanced-main-header">
              <h3><i data-lucide="settings" class="subsection-icon"></i> Configurações Avançadas</h3>
              <button id="toggleAdvancedConfig" class="advanced-toggle-btn" title="Mostrar/Ocultar configurações avançadas">
                <i data-lucide="chevron-down" class="toggle-icon"></i>
                <span class="toggle-text">Mostrar Configurações</span>
              </button>
            </div>
            
            <div id="advancedConfigContent" class="advanced-config-content collapsed">
              <!-- Subgrupo: Constantes -->
              <div class="browser-config-subgroup">
                <h4><i data-lucide="key" class="browser-section-icon"></i> Constantes</h4>
                
                <div class="constants-container">
                  <div class="constants-list" id="constantsList">
                    <!-- Constantes serão inseridas dinamicamente aqui -->
                  </div>
                  
                  <div class="constants-actions" style="display: none;">
                    <button type="button" class="add-constant-btn" id="addConstantBtn">
                      <i data-lucide="plus" class="btn-icon"></i>
                      Adicionar
                    </button>
                  </div>
                  
                  <div class="constants-help">
                    <small><i data-lucide="info" class="help-icon"></i> Sintaxe: Use <code>{{ $nome }}</code> no seu código</small>
                  </div>
                </div>
              </div>
              
              <!-- Subgrupo: Configurações do Browser -->
              <div class="browser-config-subgroup">
                <h4><i data-lucide="chrome" class="browser-section-icon"></i> Configurações do Browser</h4>
                
                <div class="config-row">
                  <div class="field half-width">
                    <label for="slowMo">
                      <i data-lucide="clock" class="field-icon"></i>
                      Slow Motion (ms)
                    </label>
                    <input type="number" id="slowMo" value="0" min="0" max="5000" step="10">
                    <small>Velocidade de execução (0 = máximo)</small>
                  </div>
                  
                  <div class="field half-width">
                    <label for="timeout">
                      <i data-lucide="timer" class="field-icon"></i>
                      Timeout (segundos)
                    </label>
                    <input type="number" id="timeout" value="120" min="10" max="300" step="10">
                    <small>Timeout para navegação e operações</small>
                  </div>
                </div>

                <div class="field">
                  <label for="userAgent">
                    <i data-lucide="monitor" class="field-icon"></i>
                    User Agent
                  </label>
                  <div class="input-with-inline-button has-dual-buttons">
                    <input type="text" id="userAgent" value="Mozilla/5.0 (iPhone; CPU iPhone OS 1">
                    <div class="ua-inline-buttons">
                      <button type="button" id="useCurrentUserAgent" class="ua-inline-button browser" title="Copiar meu User Agent">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <circle cx="12" cy="12" r="10"></circle>
                          <path d="M2 12h20"></path>
                          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                        </svg>
                      </button>
                      <button type="button" id="clearUserAgent" class="ua-inline-button clear" title="Limpar campo User Agent">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <line x1="18" y1="6" x2="6" y2="18"></line>
                          <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                      </button>
                    </div>
                  </div>
                  <small>Agente do usuário personalizado</small>
                </div>

                <div class="field">
                  <label>
                    <i data-lucide="shield" class="field-icon"></i>
                    Bloqueio de Recursos
                  </label>
                  
                  <!-- Presets Rápidos -->
                  <div class="resource-presets">
                    <div class="preset-buttons">
                      <button type="button" class="preset-btn" data-preset="none">
                        <i data-lucide="circle"></i>
                        Nenhum
                      </button>
                      <button type="button" class="preset-btn" data-preset="performance">
                        <i data-lucide="zap"></i>
                        Performance
                      </button>
                      <button type="button" class="preset-btn" data-preset="scraping">
                        <i data-lucide="search"></i>
                        Scraping
                      </button>
                      <button type="button" class="preset-btn" data-preset="minimal">
                        <i data-lucide="minimize-2"></i>
                        Mínimo
                      </button>
                      <button type="button" class="preset-btn" data-preset="maximum">
                        <i data-lucide="shield"></i>
                        Máximo
                      </button>
                    </div>
                  </div>

                  <!-- Recursos Comuns com Checkboxes -->
                  <div class="resource-checkboxes">
                    <div class="checkbox-grid">
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="image">
                        <span class="checkmark"></span>
                        <i data-lucide="image" class="resource-icon"></i>
                        Imagens
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="stylesheet">
                        <span class="checkmark"></span>
                        <i data-lucide="palette" class="resource-icon"></i>
                        CSS
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="font">
                        <span class="checkmark"></span>
                        <i data-lucide="type" class="resource-icon"></i>
                        Fontes
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="script">
                        <span class="checkmark"></span>
                        <i data-lucide="code" class="resource-icon"></i>
                        Scripts
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="media">
                        <span class="checkmark"></span>
                        <i data-lucide="play" class="resource-icon"></i>
                        Mídia
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="xhr">
                        <span class="checkmark"></span>
                        <i data-lucide="wifi" class="resource-icon"></i>
                        XHR/Ajax
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="fetch">
                        <span class="checkmark"></span>
                        <i data-lucide="download" class="resource-icon"></i>
                        Fetch API
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="websocket">
                        <span class="checkmark"></span>
                        <i data-lucide="radio" class="resource-icon"></i>
                        WebSocket
                      </label>
                      
                      <label class="resource-checkbox">
                        <input type="checkbox" data-resource="manifest">
                        <span class="checkmark"></span>
                        <i data-lucide="file-text" class="resource-icon"></i>
                        Manifest
                      </label>
                    </div>
                  </div>

                  <!-- Campo avançado (oculto por padrão) -->
                  <div class="advanced-resources">
                    <details>
                      <summary>
                        <i data-lucide="settings" class="help-icon"></i>
                        Configuração Avançada
                      </summary>
                      <div class="advanced-content">
                        <input type="text" id="blockedResourcesTypes" placeholder="Tipos personalizados separados por vírgula">
                        <small>Para tipos específicos como: texttrack, eventsource, other, document</small>
                      </div>
                    </details>
                  </div>

                  <small>Selecione os recursos que deseja bloquear para melhorar a performance</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Código Gerado -->
          <div class="config-group" id="headerCodeGroup">
            <div class="field-header-with-toggle">
              <h3><i data-lucide="code" class="subsection-icon"></i> Código Gerado</h3>
              <button type="button" id="headerToggle" class="editor-toggle-btn-discrete" data-editor-toggle="header" title="Expandir editor (Ctrl+Shift+E)">
                <span class="toggle-text">expandir</span>
                <span class="toggle-icon">⤢</span>
              </button>
            </div>
            <div class="code-section">
              <div id="headerEditor" class="code-editor-container" data-editor-id="header"></div>
            </div>
          </div>

          </div>
        </section>

        <section class="execution-section">
          <div class="section-header">
            <h2><i data-lucide="play" class="section-icon"></i> Execução</h2>
            <div class="header-actions">
              <button id="toggleExecutionSection" class="section-toggle-btn" title="Expandir/Recolher seção">
                <i data-lucide="chevron-up" class="toggle-icon"></i>
                <span class="toggle-text">Recolher</span>
              </button>
              <button id="copyCodeBtn" class="btn btn-secondary btn-small" title="Copiar código completo para clipboard">
                <i data-lucide="copy"></i>
                Copiar Código
              </button>
            </div>
          </div>
          
          <div id="executionSectionContent" class="section-content">

          <!-- Código da Automação -->
          <div class="execution-group" id="automationCodeGroup">
            <div class="field-header-with-toggle">
              <h3><i data-lucide="bot" class="subsection-icon"></i> Código da Automação</h3>
              <button type="button" id="automationToggle" class="editor-toggle-btn-discrete" data-editor-toggle="automation" title="Expandir editor (Ctrl+Shift+E)">
                <span class="toggle-text">expandir</span>
                <span class="toggle-icon">⤢</span>
              </button>
            </div>
            <div class="code-section">
              <div id="automationEditor" class="code-editor-container" data-editor-id="automation"></div>
            </div>
          </div>

          <!-- Extração de dados e encerramento da sessão -->
          <div class="execution-group" id="footerCodeGroup">
            <div class="field-header-with-toggle">
              <h3><i data-lucide="database" class="subsection-icon"></i> Extração de dados e encerramento da sessão</h3>
              <button type="button" id="footerToggle" class="editor-toggle-btn-discrete" data-editor-toggle="footer" title="Expandir editor (Ctrl+Shift+E)">
                <span class="toggle-text">expandir</span>
                <span class="toggle-icon">⤢</span>
              </button>
            </div>
            <div class="code-section">
              <div id="footerEditor" class="code-editor-container" data-editor-id="footer"></div>
            </div>
            <div class="action-buttons" style="margin-top: 15px;">
              <button id="sessionToggleBtn" class="btn btn-success" title="Criar nova sessão Puppeteer">
                <i data-lucide="plus-circle"></i>
                Criar Sessão
              </button>
              <button id="executeCodeBtn" class="btn btn-primary" title="Executar automação na sessão ativa" disabled>
                <i data-lucide="play"></i>
                Executar Automação
              </button>
              <button id="executeExtractionBtn" class="btn btn-info" title="Executar apenas extração de dados" disabled>
                <i data-lucide="database"></i>
                Executar Extração
              </button>
              <button id="takeScreenshotBtn" class="btn btn-secondary" title="Tirar screenshot da página" disabled>
                <i data-lucide="camera"></i>
                Tirar Screenshot
              </button>
            </div>
          </div>

          <!-- Results Section -->
          <div class="execution-group" id="resultsSection">
            <h3><i data-lucide="clipboard-list" class="subsection-icon"></i> Resultados da Execução</h3>
            
            <div class="results-tabs">
              <button class="tab-btn active" data-tab="screenshot">
                <i data-lucide="camera"></i>
                Screenshot
              </button>
              <button class="tab-btn" data-tab="data">
                <i data-lucide="download"></i>
                Dados Extraídos
              </button>
              <button class="tab-btn" data-tab="pageinfo">
                <i data-lucide="info"></i>
                Info da Página
              </button>
            </div>
            
            <div class="results-content">
              <div id="screenshotTab" class="tab-content active">
                <div id="screenshotContainer" class="screenshot-container">
                  <p class="empty-state">Nenhum screenshot capturado ainda</p>
                </div>
              </div>
              
              <div id="dataTab" class="tab-content">
                <div id="dataContainer" class="data-container">
                  <pre class="code-output"><code>// Dados extraídos aparecerão aqui...</code></pre>
                </div>
              </div>
              
              <div id="pageinfoTab" class="tab-content">
                <div id="pageInfoContainer" class="page-info-container">
                  <div class="info-item">
                    <label>URL:</label>
                    <span id="currentUrl">-</span>
                  </div>
                  <div class="info-item">
                    <label>Título:</label>
                    <span id="currentTitle">-</span>
                  </div>
                  <div class="info-item">
                    <label>Última atualização:</label>
                    <span id="lastUpdate">-</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="execution-group">
            <h3><i data-lucide="terminal" class="subsection-icon"></i> Console de Saída</h3>
            <div id="logs" class="console-output">
              <!-- Logs serão adicionados dinamicamente -->
            </div>
          </div>
          </div>
        </section>
        </div>
        <!-- End Playground Page -->

        <!-- Recording Page -->
        <div id="recordingPage" class="page-content">
          <section class="recording-config-section">
            <div class="section-header">
              <h2><i data-lucide="video" class="section-icon"></i> Configuração da Gravação</h2>
              <div class="header-actions">
                <button id="toggleRecordingConfigSection" class="section-toggle-btn" title="Expandir/Recolher seção">
                  <i data-lucide="chevron-up" class="toggle-icon"></i>
                  <span class="toggle-text">Recolher</span>
                </button>
              </div>
            </div>
            
            <div id="recordingConfigSectionContent" class="section-content">
              
              <!-- Status da Conexão -->
              <div class="config-group">
                <h3><i data-lucide="wifi" class="subsection-icon"></i> Status da Conexão</h3>
                <div class="connection-info">
                  <div class="connection-item">
                    <div class="connection-status">
                      <i data-lucide="circle" class="status-icon" id="recordingChromeStatus"></i>
                      <span class="status-text" id="recordingChromeStatusText">Verificando Chrome...</span>
                    </div>
                  </div>
                  <div class="connection-item">
                    <div class="connection-status">
                      <i data-lucide="circle" class="status-icon" id="recordingPlaygroundStatus"></i>
                      <span class="status-text" id="recordingPlaygroundStatusText">Verificando configurações do Playground...</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Configurações de Gravação -->
              <div class="config-group">
                <h3><i data-lucide="settings" class="subsection-icon"></i> Configurações de Gravação</h3>
                
                <div class="field">
                  <label>
                    <i data-lucide="target" class="field-icon"></i>
                    Eventos a Gravar
                  </label>
                  
                  <div class="recording-events-grid">
                    <label class="recording-event-checkbox">
                      <input type="checkbox" data-event="click" checked>
                      <i data-lucide="mouse-pointer" class="event-icon"></i>
                      Cliques
                    </label>
                    
                    <label class="recording-event-checkbox">
                      <input type="checkbox" data-event="type" checked>
                      <i data-lucide="keyboard" class="event-icon"></i>
                      Digitação
                    </label>
                    
                    <label class="recording-event-checkbox">
                      <input type="checkbox" data-event="navigation" checked>
                      <i data-lucide="navigation" class="event-icon"></i>
                      Navegação
                    </label>
                    
                    <label class="recording-event-checkbox">
                      <input type="checkbox" data-event="scroll">
                      <i data-lucide="scroll" class="event-icon"></i>
                      Scroll
                    </label>
                    
                    <label class="recording-event-checkbox">
                      <input type="checkbox" data-event="hover">
                      <i data-lucide="move" class="event-icon"></i>
                      Hover
                    </label>
                    
                    <label class="recording-event-checkbox">
                      <input type="checkbox" data-event="wait" checked>
                      <i data-lucide="clock" class="event-icon"></i>
                      Esperas
                    </label>
                  </div>
                  
                  <small>Selecione quais eventos do usuário devem ser capturados durante a gravação</small>
                </div>

                <div class="field">
                  <label for="recordingMode">
                    <i data-lucide="video" class="field-icon"></i>
                    Modo de Gravação
                  </label>
                  <select id="recordingMode">
                    <option value="smart">Inteligente (recomendado)</option>
                    <option value="detailed">Detalhado</option>
                    <option value="minimal">Mínimo</option>
                  </select>
                  <small>
                    <strong>Inteligente:</strong> Otimiza automaticamente as ações gravadas<br>
                    <strong>Detalhado:</strong> Grava todas as ações sem otimização<br>
                    <strong>Mínimo:</strong> Grava apenas ações essenciais
                  </small>
                </div>

                <div class="field">
                  <label for="recordingDelay">
                    <i data-lucide="timer" class="field-icon"></i>
                    Delay entre Ações (ms)
                  </label>
                  <input type="number" id="recordingDelay" value="500" min="0" max="5000" step="100">
                  <small>Tempo de espera automático entre ações gravadas (0 = sem delay)</small>
                </div>
              </div>

              <!-- Controles de Gravação -->
              <div class="config-group">
                <h3><i data-lucide="play-circle" class="subsection-icon"></i> Controles</h3>
                
                <div class="recording-controls">
                  <button id="startRecordingBtn" class="btn btn-record" disabled>
                    <i data-lucide="circle" class="record-icon"></i>
                    Iniciar Gravação
                  </button>
                  
                  <div class="recording-status" id="recordingStatusContainer" style="display: none;">
                    <div class="recording-indicator">
                      <div class="recording-dot"></div>
                      <span class="recording-text">Gravando...</span>
                      <span class="recording-timer" id="recordingTimer">00:00</span>
                    </div>
                    
                    <div class="recording-actions">
                      <button id="pauseRecordingBtn" class="btn btn-secondary btn-small">
                        <i data-lucide="pause"></i>
                        Pausar
                      </button>
                      <button id="stopRecordingBtn" class="btn btn-danger btn-small">
                        <i data-lucide="square"></i>
                        Parar
                      </button>
                    </div>
                  </div>
                </div>
                
                <div class="recording-info" id="recordingInfo" style="display: none;">
                  <div class="info-item">
                    <label>Ações gravadas:</label>
                    <span id="actionsCount">0</span>
                  </div>
                  <div class="info-item">
                    <label>Duração:</label>
                    <span id="recordingDuration">00:00</span>
                  </div>
                  <div class="info-item">
                    <label>Status:</label>
                    <span id="recordingStatusText">Pronto</span>
                  </div>
                </div>
              </div>

            </div>
          </section>

          <section class="recording-execution-section">
            <div class="section-header">
              <h2><i data-lucide="monitor" class="section-icon"></i> Preview da Sessão</h2>
              <div class="header-actions">
                <button id="toggleRecordingExecutionSection" class="section-toggle-btn" title="Expandir/Recolher seção">
                  <i data-lucide="chevron-up" class="toggle-icon"></i>
                  <span class="toggle-text">Recolher</span>
                </button>
                <button id="refreshPreviewBtn" class="btn btn-secondary btn-small" title="Atualizar preview" disabled>
                  <i data-lucide="refresh-cw"></i>
                  Atualizar
                </button>
              </div>
            </div>
            
            <div id="recordingExecutionSectionContent" class="section-content">
              
              <!-- Preview da Página -->
              <div class="execution-group">
                <h3><i data-lucide="eye" class="subsection-icon"></i> Preview da Página</h3>
                
                <div class="preview-container">
                  <div class="preview-header">
                    <div class="preview-url">
                      <i data-lucide="globe" class="url-icon"></i>
                      <span id="previewUrl">Aguardando conexão...</span>
                    </div>
                    <div class="preview-actions">
                      <button id="takePreviewScreenshot" class="btn btn-secondary btn-small" title="Capturar screenshot" disabled>
                        <i data-lucide="camera"></i>
                      </button>
                      <button id="fullscreenPreview" class="btn btn-secondary btn-small" title="Tela cheia" disabled>
                        <i data-lucide="maximize"></i>
                      </button>
                    </div>
                  </div>
                  
                  <div class="preview-viewport" id="previewViewport">
                    <div class="preview-placeholder">
                      <i data-lucide="monitor" class="placeholder-icon"></i>
                      <p>Preview aparecerá aqui quando a gravação iniciar</p>
                      <small>Configure o playground e inicie a gravação para ver o preview</small>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Ações Capturadas -->
              <div class="execution-group">
                <h3><i data-lucide="list" class="subsection-icon"></i> Ações Capturadas</h3>
                
                <div class="actions-container">
                  <div class="actions-header">
                    <div class="actions-stats">
                      <span class="stat-item">
                        <i data-lucide="hash" class="stat-icon"></i>
                        Total: <strong id="totalActionsCount">0</strong>
                      </span>
                      <span class="stat-item">
                        <i data-lucide="clock" class="stat-icon"></i>
                        Última: <strong id="lastActionTime">--:--</strong>
                      </span>
                    </div>
                    <div class="actions-controls">
                      <button id="clearActionsBtn" class="btn btn-secondary btn-small" title="Limpar todas as ações" disabled>
                        <i data-lucide="trash-2"></i>
                        Limpar
                      </button>
                      <button id="exportActionsBtn" class="btn btn-secondary btn-small" title="Exportar ações" disabled>
                        <i data-lucide="download"></i>
                        Exportar
                      </button>
                    </div>
                  </div>
                  
                  <div class="actions-list" id="actionsList">
                    <div class="actions-empty">
                      <i data-lucide="mouse-pointer" class="empty-icon"></i>
                      <p>Nenhuma ação gravada ainda</p>
                      <small>As ações aparecerão aqui conforme você interage com a página</small>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Timeline das Ações -->
              <div class="execution-group">
                <h3><i data-lucide="timeline" class="subsection-icon"></i> Timeline</h3>
                
                <div class="timeline-container">
                  <div class="timeline-controls">
                    <button id="playTimelineBtn" class="btn btn-primary btn-small" title="Reproduzir timeline" disabled>
                      <i data-lucide="play"></i>
                      Reproduzir
                    </button>
                    <button id="pauseTimelineBtn" class="btn btn-secondary btn-small" title="Pausar timeline" disabled style="display: none;">
                      <i data-lucide="pause"></i>
                      Pausar
                    </button>
                    <div class="timeline-speed">
                      <label for="timelineSpeed">Velocidade:</label>
                      <select id="timelineSpeed">
                        <option value="0.5">0.5x</option>
                        <option value="1" selected>1x</option>
                        <option value="1.5">1.5x</option>
                        <option value="2">2x</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="timeline-track" id="timelineTrack">
                    <div class="timeline-empty">
                      <i data-lucide="activity" class="empty-icon"></i>
                      <p>Timeline vazia</p>
                      <small>A timeline será preenchida conforme as ações são gravadas</small>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </section>
        </div>
        <!-- End Recording Page -->
      </main>
    </div>

    <!-- Documentation Modal -->
    <div id="docsModal" class="modal" style="display: none;">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-header">
          <h2><i data-lucide="book-open"></i> Documentação - Felinto Connect Bot</h2>
          <button id="closeDocsModal" class="modal-close" title="Fechar">
            <i data-lucide="x"></i>
          </button>
        </div>
        <div class="modal-body">
          <div id="docsContent" class="docs-content">
            <div class="loading-spinner">
              <i data-lucide="loader-2"></i>
              Carregando documentação...
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <script type="module" src="/src/main.ts"></script>
    <script>
      // Inicializar ícones Lucide após carregamento
      document.addEventListener('DOMContentLoaded', () => {
        const initIcons = () => {
          if (typeof lucide !== 'undefined') {
            try {
              lucide.createIcons();
            } catch (error) {
              console.error('Erro na inicialização dos ícones:', error);
            }
          } else {
            setTimeout(initIcons, 50);
          }
        };
        initIcons();
      });
    </script>
  </body>
</html>
